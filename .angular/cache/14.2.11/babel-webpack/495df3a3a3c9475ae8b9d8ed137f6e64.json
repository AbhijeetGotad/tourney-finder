{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { timer } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../../../core/services/otp-verification.service\";\nimport * as i3 from \"../login.service\";\n\nfunction OtpVerificationComponent_div_19_mat_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 23);\n    i0.ɵɵtext(1, \"cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction OtpVerificationComponent_div_19_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(2, 1, ctx_r4.unlockTimer * 1000, \"mm:ss\"), \" secs\");\n  }\n}\n\nfunction OtpVerificationComponent_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtemplate(1, OtpVerificationComponent_div_19_mat_icon_1_Template, 2, 0, \"mat-icon\", 21);\n    i0.ɵɵtext(2);\n    i0.ɵɵtemplate(3, OtpVerificationComponent_div_19_span_3_Template, 3, 4, \"span\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.errorMessage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.errorMessage, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.unlockTimer > 0);\n  }\n}\n\nfunction OtpVerificationComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" One Time Password will be sent to your registered Mobile Number \");\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.mobileNo);\n  }\n}\n\nfunction OtpVerificationComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1, \" One Time Password will be sent to your registered Email ID \");\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.emailId);\n  }\n}\n\nexport let OtpVerificationComponent = /*#__PURE__*/(() => {\n  class OtpVerificationComponent {\n    constructor(router, otpService, loginSrv) {\n      this.router = router;\n      this.otpService = otpService;\n      this.loginSrv = loginSrv;\n      this.sendOtpform = new FormGroup({\n        sendOtpOn: new FormControl('m', Validators.required)\n      });\n      this.subscriptionsList = [];\n      this.errorMessage = '';\n      this.unlockTimer = 0;\n    }\n\n    ngOnInit() {}\n\n    onCancel() {\n      var _a;\n\n      (_a = this.sendOtpform.controls['sendOtpOn']) === null || _a === void 0 ? void 0 : _a.setValue(null);\n      this.router.navigate(['/login']);\n    }\n\n    sendOTP() {\n      var _a;\n\n      let payload = {\n        flag: (_a = this.sendOtpform.get('sendOtpOn')) === null || _a === void 0 ? void 0 : _a.value\n      };\n      this.subscriptionsList.push(this.otpService.sendOTP(payload).subscribe(res => {\n        var _a;\n\n        if (res && res.status == 'Success') {\n          this.otpService.forgotPassword = false;\n          this.router.navigate(['/otp-input'], {\n            queryParams: {\n              type: btoa((_a = this.sendOtpform.get('sendOtpOn')) === null || _a === void 0 ? void 0 : _a.value)\n            }\n          });\n        }\n      }, error => {\n        var _a;\n\n        this.unlockTimer = error.error.ttl;\n        this.errorMessage = error.error.message;\n\n        if (this.unlockTimer > 0) {\n          (_a = this.unlockTimerSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n          this.setTimer();\n        }\n      }));\n    }\n\n    setTimer() {\n      let otp_timer = timer(0, 1000);\n      this.unlockTimerSub = otp_timer.subscribe(t => {\n        if (this.unlockTimer !== 0) {\n          this.unlockTimer--;\n        } else {\n          this.errorMessage = '';\n          this.unlockTimerSub.unsubscribe();\n        }\n      });\n    }\n\n    ngOnDestroy() {\n      var _a;\n\n      (_a = this.unlockTimerSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n      if (this.subscriptionsList.length > 0) this.subscriptionsList.forEach(subscription => {\n        subscription.unsubscribe();\n      });\n    }\n\n  }\n\n  OtpVerificationComponent.ɵfac = function OtpVerificationComponent_Factory(t) {\n    return new (t || OtpVerificationComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.OtpVerificationService), i0.ɵɵdirectiveInject(i3.LoginService));\n  };\n\n  OtpVerificationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OtpVerificationComponent,\n    selectors: [[\"app-otp-verification\"]],\n    decls: 27,\n    vars: 5,\n    consts: [[\"fxFlex\", \"100%\", \"fxLayoutAlign\", \"center center\", 1, \"otp-verification-container\"], [\"fxFlex\", \"60%\", \"fxLayout\", \"column\", \"fxLayoutAlign\", \"center center\", \"fxLayoutGap\", \"20px\", 1, \"signup-page\"], [\"fxLayoutAlign\", \"center center\", 1, \"logo\"], [\"src\", \"assets/images/svg/JiofaceLogo.svg\", \"alt\", \"logo\", \"width\", \"80%\"], [\"fxLayout\", \"row\", \"fxLayoutAlign\", \"center center\", 1, \"login-form\"], [\"fxLayoutGap\", \"15px\", \"fxFlex\", \"65%\", \"fxLayout\", \"column\", \"fxLayoutAlign\", \"start start\", 1, \"round-33\"], [\"fxLayoutAlign\", \"flex-start flex-start\", 1, \"heading-section\", \"mb-20\"], [1, \"bold\", \"heading\", \"no-margin\"], [\"fxFlex\", \"100%\", \"fxLayoutAlign\", \"start start\"], [\"fxFlex\", \"\", \"fxLayout\", \"column\", \"fxLayoutAlign\", \"start start\", 1, \"bottom-container\"], [3, \"formGroup\"], [\"fxLayout\", \"column\", \"fxLayoutGap\", \"20px\"], [\"aria-label\", \"Select an option\", \"fxLayout\", \"column\", \"fxLayoutGap\", \"8px\", \"formControlName\", \"sendOtpOn\"], [\"value\", \"m\"], [\"value\", \"e\"], [\"class\", \"error-text\", \"fxLayout\", \"row\", 4, \"ngIf\"], [\"class\", \"description mt-20\", 4, \"ngIf\"], [1, \"btn-section\"], [\"fxFlex\", \"100%\", \"fxLayoutAlign\", \"center center\", \"type\", \"button\", \"mat-flat-button\", \"\", 1, \"secondary-btn\", 3, \"click\"], [\"fxFlex\", \"100%\", \"fxLayoutAlign\", \"center center\", \"type\", \"button\", \"mat-flat-button\", \"\", 1, \"primary-btn\", 3, \"disabled\", \"click\"], [\"fxLayout\", \"row\", 1, \"error-text\"], [\"class\", \"sub-title-text\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"sub-title-text\"], [1, \"description\", \"mt-20\"]],\n    template: function OtpVerificationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 4)(5, \"mat-card\", 5)(6, \"div\", 6)(7, \"h1\", 7);\n        i0.ɵɵtext(8, \"OTP Verification\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"p\", 8);\n        i0.ɵɵtext(10, \" Send OTP on \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 9)(12, \"form\", 10)(13, \"div\", 11)(14, \"mat-radio-group\", 12)(15, \"mat-radio-button\", 13);\n        i0.ɵɵtext(16, \"SMS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-radio-button\", 14);\n        i0.ɵɵtext(18, \"Email\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(19, OtpVerificationComponent_div_19_Template, 4, 3, \"div\", 15);\n        i0.ɵɵtemplate(20, OtpVerificationComponent_div_20_Template, 4, 1, \"div\", 16);\n        i0.ɵɵtemplate(21, OtpVerificationComponent_div_21_Template, 4, 1, \"div\", 16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(22, \"div\", 17)(23, \"button\", 18);\n        i0.ɵɵlistener(\"click\", function OtpVerificationComponent_Template_button_click_23_listener() {\n          return ctx.onCancel();\n        });\n        i0.ɵɵtext(24, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function OtpVerificationComponent_Template_button_click_25_listener() {\n          return ctx.sendOTP();\n        });\n        i0.ɵɵtext(26, \"Send OTP\");\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        let tmp_2_0;\n        let tmp_3_0;\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"formGroup\", ctx.sendOtpform);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.sendOtpform.get(\"sendOtpOn\")) == null ? null : tmp_2_0.value) == \"m\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_3_0 = ctx.sendOtpform.get(\"sendOtpOn\")) == null ? null : tmp_3_0.value) == \"e\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"disabled\", !ctx.sendOtpform.valid || ctx.errorMessage != \"\");\n      }\n    },\n    styles: [\".otp-verification-container{width:100%;height:100vh;background:var(--global-white)}.otp-verification-container .login-form{border-radius:24px!important;padding:32px!important;width:100%!important}.otp-verification-container .login-form .mat-card{padding:24px}.otp-verification-container .heading-section{display:flex;justify-content:center;align-items:center;flex-direction:column;width:90%;text-align:center;color:#000;font-weight:800}.otp-verification-container .heading{color:var(--global-black);font-size:var(--font-size-big-head)}.otp-verification-container .sub-heading{font-size:9px}.otp-verification-container .login-form .secondary-btn{border:none!important;border-radius:50px!important;background-color:var(--global-white)!important;box-shadow:0 0 1px #0000008f!important;cursor:pointer!important}.otp-verification-container .login-form .primary-btn{margin:0!important;border-radius:50px;width:80%}.otp-verification-container .login-form .input-section{padding:0 20px}.otp-verification-container .login-form .note-section{font-size:10px;padding:20px;width:80%}.otp-verification-container .login-form .btn-section{display:flex;justify-content:center;align-items:center;gap:20px;width:100%}.otp-verification-container .login-form .bottom-container{width:100%;row-gap:24px}.otp-verification-container .mat-mdc-radio-button~.mat-mdc-radio-button{margin-left:16px}.otp-verification-container .description{margin:0 0 30px}.otp-verification-container .signup-page .ico-large{width:100px;height:inherit!important}\\n\"],\n    encapsulation: 2\n  });\n  return OtpVerificationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}